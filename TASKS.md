# 공학용 계산기 프로젝트 - 향후 작업 계획

## 📋 현재 상태

### ✅ 완료된 작업
- [x] PRD 작성
- [x] Tech Spec 작성
- [x] GitHub 저장소 설정
- [x] GitHub Actions 워크플로우 구성
- [x] 프로젝트 구조 재구성 (src/, design/)
- [x] TDD 및 SOLID 규칙 설정
- [x] UI 디자인 (HTML/CSS/TailwindCSS)

### ⚠️ 진행 중
- [ ] GitHub Pages 활성화 (사용자 설정 필요)

---

## 🎯 Phase 1: 개발 환경 설정 (1-2일)

### 1.1 Node.js 프로젝트 초기화
- [ ] `package.json` 생성
  ```bash
  npm init -y
  ```
- [ ] 프로젝트 메타데이터 업데이트
  - name, version, description
  - repository, author, license

### 1.2 테스트 환경 설정
- [ ] Jest 설치
  ```bash
  npm install --save-dev jest @types/jest
  ```
- [ ] Jest 설정 파일 생성 (`jest.config.js`)
  - 테스트 파일 패턴: `**/*.test.js`
  - 커버리지 임계값: 90%
  - 테스트 환경: `jsdom`
- [ ] package.json 스크립트 추가
  ```json
  {
    "scripts": {
      "test": "jest",
      "test:watch": "jest --watch",
      "test:coverage": "jest --coverage"
    }
  }
  ```

### 1.3 개발 도구 설정
- [ ] ESLint 설치 및 설정
  ```bash
  npm install --save-dev eslint
  npx eslint --init
  ```
- [ ] Prettier 설치 및 설정
  ```bash
  npm install --save-dev prettier eslint-config-prettier
  ```
- [ ] `.eslintrc.js` 및 `.prettierrc` 설정 파일 생성

### 1.4 Git 설정 업데이트
- [ ] `.gitignore`에 `node_modules/` 추가
- [ ] 변경사항 커밋

---

## 🎯 Phase 2: 코어 로직 구현 - Parser (3-5일)

> **TDD 필수 적용**: 모든 기능은 테스트 먼저 작성

### 2.1 Parser 기본 구조
- [ ] `src/js/parser.js` 파일 생성
- [ ] `src/js/__tests__/parser.test.js` 파일 생성
- [ ] Parser 클래스 기본 구조 설계

### 2.2 토큰화 (Tokenization)

#### 2.2.1 숫자 토큰화
- [ ] **테스트**: 단일 정수 토큰화 ('42' → ['42'])
- [ ] **구현**: 정수 패턴 매칭
- [ ] **테스트**: 소수점 숫자 ('3.14' → ['3.14'])
- [ ] **구현**: 소수점 패턴 추가
- [ ] **테스트**: 여러 자릿수 ('12345' → ['12345'])
- [ ] **구현**: 숫자 길이 제한 없음 확인
- [ ] **테스트**: 0으로 시작하는 소수 ('0.5' → ['0.5'])
- [ ] **구현**: 0.x 패턴 처리

#### 2.2.2 연산자 토큰화
- [ ] **테스트**: 기본 연산자 ('+', '-', '*', '/')
  ```javascript
  test('should tokenize operators', () => {
    expect(Parser.tokenize('2+3')).toEqual(['2', '+', '3']);
    expect(Parser.tokenize('5-2')).toEqual(['5', '-', '2']);
  });
  ```
- [ ] **구현**: 연산자 패턴 매칭
- [ ] **테스트**: 거듭제곱 ('^')
- [ ] **구현**: ^ 연산자 추가
- [ ] **테스트**: 나머지 ('mod')
- [ ] **구현**: 문자열 연산자 처리

#### 2.2.3 괄호 토큰화
- [ ] **테스트**: 여는 괄호 '('
- [ ] **구현**: 괄호 패턴 추가
- [ ] **테스트**: 닫는 괄호 ')'
- [ ] **구현**: 괄호 쌍 처리
- [ ] **테스트**: 중첩 괄호 ('((2+3))')
- [ ] **구현**: 중첩 괄호 검증

#### 2.2.4 함수 토큰화
- [ ] **테스트**: 단일 문자 함수 없음 확인
- [ ] **구현**: 함수명 패턴 (2글자 이상)
- [ ] **테스트**: 삼각함수 ('sin', 'cos', 'tan')
  ```javascript
  test('should tokenize trig functions', () => {
    expect(Parser.tokenize('sin(30)')).toEqual(['sin', '(', '30', ')']);
  });
  ```
- [ ] **구현**: 함수명 리스트 정의
- [ ] **테스트**: 로그 함수 ('log', 'ln')
- [ ] **구현**: 로그 함수 추가
- [ ] **테스트**: 역삼각함수 ('asin', 'acos', 'atan')
- [ ] **구현**: 역함수 패턴
- [ ] **테스트**: 쌍곡선 함수 ('sinh', 'cosh', 'tanh')
- [ ] **구현**: 쌍곡선 함수 추가
- [ ] **테스트**: 기타 함수 ('sqrt', 'abs', 'exp')
- [ ] **구현**: 모든 지원 함수 목록 완성

#### 2.2.5 특수 케이스 처리
- [ ] **테스트**: 공백 제거 ('2 + 3' → ['2', '+', '3'])
- [ ] **구현**: trim 및 공백 무시
- [ ] **테스트**: 음수 처리 ('-5' → ['-5'])
- [ ] **구현**: 단항 마이너스 vs 이항 마이너스 구분
  ```javascript
  // 단항: -5, (-3)
  // 이항: 5-3
  ```
- [ ] **테스트**: 연속 연산자 감지 ('2++3')
- [ ] **구현**: 연속 연산자 오류 처리
- [ ] **테스트**: 수학 상수 ('π', 'e')
- [ ] **구현**: 상수 토큰 처리
- [ ] **테스트**: 대소문자 구분 ('SIN' vs 'sin')
- [ ] **구현**: 소문자 변환 또는 대소문자 무시

#### 2.2.6 토큰화 리팩토링
- [ ] 정규식 패턴 최적화
- [ ] 성능 테스트 (긴 수식)
- [ ] 코드 가독성 개선
- [ ] 주석 추가

### 2.3 Shunting Yard Algorithm

#### 2.3.1 기본 알고리즘 구조
- [ ] **설계**: 출력 큐와 연산자 스택 구조 정의
- [ ] **테스트**: 빈 수식 처리
- [ ] **구현**: 초기화 및 빈 수식 반환

#### 2.3.2 단순 연산
- [ ] **테스트**: 단일 숫자 ('5' → ['5'])
- [ ] **구현**: 숫자는 출력 큐로 직접 이동
- [ ] **테스트**: 단순 덧셈 ('2 + 3' → ['2', '3', '+'])
- [ ] **구현**: 연산자 스택 기본 로직
- [ ] **테스트**: 단순 뺄셈 ('5 - 2' → ['5', '2', '-'])
- [ ] **구현**: 뺄셈 처리 확인

#### 2.3.3 연산자 우선순위
- [ ] **설계**: 우선순위 맵 정의
  ```javascript
  const PRECEDENCE = {
    '+': 1, '-': 1,
    '*': 2, '/': 2,
    '^': 3
  };
  ```
- [ ] **테스트**: 곱셈 우선 ('2 + 3 * 4' → ['2', '3', '4', '*', '+'])
- [ ] **구현**: 우선순위 비교 로직
- [ ] **테스트**: 나눗셈 우선 ('10 / 2 + 3' → ['10', '2', '/', '3', '+'])
- [ ] **구현**: 나눗셈 우선순위 확인
- [ ] **테스트**: 거듭제곱 최우선 ('2 ^ 3 * 4' → ['2', '3', '^', '4', '*'])
- [ ] **구현**: 거듭제곱 우선순위
- [ ] **테스트**: 좌결합성 vs 우결합성 ('2 ^ 3 ^ 4')
- [ ] **구현**: 거듭제곱은 우결합

#### 2.3.4 괄호 처리
- [ ] **테스트**: 단순 괄호 ('(2 + 3)' → ['2', '3', '+'])
- [ ] **구현**: 여는 괄호는 스택에 푸시
- [ ] **테스트**: 괄호로 우선순위 변경 ('(2 + 3) * 4' → ['2', '3', '+', '4', '*'])
- [ ] **구현**: 닫는 괄호 만날 때까지 팝
- [ ] **테스트**: 중첩 괄호 ('((2 + 3) * 4)')
- [ ] **구현**: 중첩 괄호 스택 처리
- [ ] **테스트**: 불일치 괄호 오류 ('(2 + 3')
- [ ] **구현**: 괄호 균형 검증

#### 2.3.5 함수 처리
- [ ] **테스트**: 단순 함수 ('sin(30)' → ['30', 'sin'])
- [ ] **구현**: 함수는 연산자처럼 스택에
- [ ] **테스트**: 함수 우선순위 ('2 + sin(30)')
- [ ] **구현**: 함수는 최고 우선순위
- [ ] **테스트**: 중첩 함수 ('sin(cos(0))')
- [ ] **구현**: 함수 중첩 처리
- [ ] **테스트**: 함수 인자 여러 개 (향후 확장)
- [ ] **구현**: 쉼표 처리 (선택)

#### 2.3.6 복잡한 수식
- [ ] **테스트**: 혼합 수식 ('2 + 3 * sin(30) / (1 + 2)')
- [ ] **구현**: 모든 규칙 통합
- [ ] **테스트**: 긴 수식 (10개 이상 토큰)
- [ ] **구현**: 성능 확인

#### 2.3.7 리팩토링
- [ ] 코드 중복 제거
- [ ] 함수 분리 (isOperator, isFunction 등)
- [ ] 주석 및 문서화
- [ ] 성능 최적화

### 2.4 오류 처리
- [ ] **테스트**: 잘못된 괄호 (불일치)
- [ ] **구현**: 괄호 검증
- [ ] **테스트**: 잘못된 연산자 배치
- [ ] **구현**: 연산자 검증
- [ ] **테스트**: 빈 수식
- [ ] **구현**: 빈 수식 처리

---

## 🎯 Phase 3: 코어 로직 구현 - Evaluator (3-5일)

### 3.1 Evaluator 기본 구조
- [ ] `src/js/evaluator.js` 파일 생성
- [ ] `src/js/__tests__/evaluator.test.js` 파일 생성
- [ ] Evaluator 클래스 기본 구조

### 3.2 기본 연산

#### 3.2.1 후위 표기법 계산 구조
- [ ] **설계**: 스택 기반 계산 알고리즘
- [ ] **테스트**: 단일 숫자 (['5'] → 5)
- [ ] **구현**: 숫자는 스택에 푸시

#### 3.2.2 덧셈
- [ ] **테스트**: 단순 덧셈 (['2', '3', '+'] → 5)
- [ ] **구현**: applyOperator('+', a, b) = a + b
- [ ] **테스트**: 여러 덧셈 (['1', '2', '+', '3', '+'] → 6)
- [ ] **구현**: 연속 덧셈 확인

#### 3.2.3 뺄셈
- [ ] **테스트**: 단순 뺄셈 (['5', '2', '-'] → 3)
- [ ] **구현**: applyOperator('-', a, b) = a - b
- [ ] **테스트**: 음수 결과 (['2', '5', '-'] → -3)
- [ ] **구현**: 음수 처리 확인

#### 3.2.4 곱셈
- [ ] **테스트**: 단순 곱셈 (['3', '4', '*'] → 12)
- [ ] **구현**: applyOperator('*', a, b) = a * b
- [ ] **테스트**: 0 곱하기 (['5', '0', '*'] → 0)
- [ ] **구현**: 0 처리 확인

#### 3.2.5 나눗셈
- [ ] **테스트**: 단순 나눗셈 (['10', '2', '/'] → 5)
- [ ] **구현**: applyOperator('/', a, b) = a / b
- [ ] **테스트**: 소수 결과 (['5', '2', '/'] → 2.5)
- [ ] **구현**: 부동소수점 처리
- [ ] **테스트**: 0으로 나누기 오류 (['5', '0', '/'])
- [ ] **구현**: throw Error('Division by zero')
- [ ] **테스트**: 매우 작은 수로 나누기
- [ ] **구현**: Infinity 처리

#### 3.2.6 거듭제곱
- [ ] **테스트**: 제곱 (['2', '3', '^'] → 8)
- [ ] **구현**: Math.pow(a, b)
- [ ] **테스트**: 0의 거듭제곱 (['0', '5', '^'] → 0)
- [ ] **구현**: 특수 케이스 처리
- [ ] **테스트**: 음수 지수 (['2', '-1', '^'] → 0.5)
- [ ] **구현**: 음수 지수 확인

### 3.3 고급 연산
- [ ] **테스트**: 거듭제곱 (x^y)
- [ ] **구현**: Math.pow 사용
- [ ] **테스트**: 제곱근 (√x)
- [ ] **구현**: Math.sqrt 사용
- [ ] **테스트**: 절댓값 (|x|)
- [ ] **구현**: Math.abs 사용
- [ ] **테스트**: 팩토리얼 (n!)
- [ ] **구현**: 재귀 또는 반복문
- [ ] **테스트**: 모듈로 (mod)
- [ ] **구현**: % 연산자

### 3.4 삼각함수
- [ ] **테스트**: sin (DEG 모드)
- [ ] **구현**: 각도 → 라디안 변환 + Math.sin
- [ ] **테스트**: cos (DEG 모드)
- [ ] **구현**: Math.cos
- [ ] **테스트**: tan (DEG 모드)
- [ ] **구현**: Math.tan
- [ ] **테스트**: sin (RAD 모드)
- [ ] **구현**: 라디안 모드 처리
- [ ] **테스트**: 역삼각함수 (asin, acos, atan)
- [ ] **구현**: Math.asin, acos, atan
- [ ] **테스트**: 쌍곡선 함수 (sinh, cosh, tanh)
- [ ] **구현**: Math.sinh, cosh, tanh

### 3.5 로그 및 지수 함수
- [ ] **테스트**: 자연로그 (ln)
- [ ] **구현**: Math.log
- [ ] **테스트**: 상용로그 (log)
- [ ] **구현**: Math.log10
- [ ] **테스트**: 지수함수 (exp)
- [ ] **구현**: Math.exp
- [ ] **테스트**: 10^x
- [ ] **구현**: Math.pow(10, x)

### 3.6 수학 상수
- [ ] **테스트**: π (파이)
- [ ] **구현**: Math.PI
- [ ] **테스트**: e (오일러 수)
- [ ] **구현**: Math.E

---

## 🎯 Phase 4: 코어 로직 구현 - Calculator Engine (2-3일)

### 4.1 Calculator 클래스
- [ ] `src/js/calculator.js` 파일 생성
- [ ] `src/js/__tests__/calculator.test.js` 파일 생성
- [ ] Calculator 클래스 기본 구조

### 4.2 상태 관리

#### 4.2.1 초기화
- [ ] **설계**: 상태 객체 구조 정의
  ```javascript
  {
    currentExpression: '',
    result: null,
    angleMode: 'DEG',
    history: [],
    secondFunction: false
  }
  ```
- [ ] **테스트**: 초기 상태 확인
- [ ] **구현**: 생성자 및 초기화

#### 4.2.2 숫자 입력
- [ ] **테스트**: 단일 숫자 입력 ('5')
- [ ] **구현**: inputNumber(num) → currentExpression += num
- [ ] **테스트**: 연속 숫자 입력 ('123')
- [ ] **구현**: 문자열 연결 확인
- [ ] **테스트**: 소수점 입력 ('3.14')
- [ ] **구현**: 소수점 중복 방지
- [ ] **테스트**: 0으로 시작 ('0.5')
- [ ] **구현**: 0.x 패턴 허용

#### 4.2.3 연산자 입력
- [ ] **테스트**: 연산자 입력 ('+', '-', '*', '/')
- [ ] **구현**: inputOperator(op) → currentExpression += ` ${op} `
- [ ] **테스트**: 연산자 연속 입력 방지 ('2++')
- [ ] **구현**: 마지막 문자가 연산자면 교체
- [ ] **테스트**: 수식 시작에 연산자 ('+5')
- [ ] **구현**: 단항 연산자 처리 또는 오류

#### 4.2.4 함수 입력
- [ ] **테스트**: 함수 입력 ('sin', 'cos')
- [ ] **구현**: inputFunction(func) → currentExpression += `${func}(`
- [ ] **테스트**: 자동 괄호 추가 확인
- [ ] **구현**: 여는 괄호 자동 추가

#### 4.2.5 괄호 입력
- [ ] **테스트**: 여는 괄호 입력
- [ ] **구현**: inputOpenParen() 메서드
- [ ] **테스트**: 닫는 괄호 입력
- [ ] **구현**: inputCloseParen() 메서드
- [ ] **테스트**: 괄호 균형 검증
- [ ] **구현**: 괄호 카운터

#### 4.2.6 편집 기능
- [ ] **테스트**: 전체 지우기 (clear)
- [ ] **구현**: clear() → 모든 상태 초기화
- [ ] **테스트**: 백스페이스 (마지막 문자 삭제)
- [ ] **구현**: backspace() → currentExpression.slice(0, -1)
- [ ] **테스트**: 빈 수식에서 백스페이스
- [ ] **구현**: 빈 문자열 처리

### 4.3 계산 실행
- [ ] **테스트**: 간단한 계산 (2 + 3)
- [ ] **구현**: calculate 메서드 (Parser + Evaluator 통합)
- [ ] **테스트**: 복잡한 계산
- [ ] **구현**: 오류 처리
- [ ] **테스트**: 각도 모드 전환
- [ ] **구현**: toggleAngleMode 메서드

### 4.4 SOLID 원칙 적용
- [ ] **SRP**: Calculator, Parser, Evaluator 책임 분리 확인
- [ ] **OCP**: 새 함수 추가 시 기존 코드 수정 최소화
- [ ] **DIP**: 의존성 주입 패턴 적용

---

## 🎯 Phase 5: UI 통합 (2-3일)

### 5.1 Display Manager
- [ ] `src/js/display.js` 파일 생성
- [ ] DisplayManager 클래스 구현
- [ ] 수식 표시 업데이트 메서드
- [ ] 결과 표시 업데이트 메서드
- [ ] 모드 인디케이터 업데이트
- [ ] 오류 메시지 표시

### 5.2 Event Handlers
- [ ] `src/js/main.js` 파일 생성
- [ ] DOM 요소 선택 및 초기화
- [ ] 버튼 클릭 이벤트 (Event Delegation)
- [ ] 키보드 입력 이벤트
- [ ] 각도 모드 토글 이벤트

### 5.3 History Manager
- [ ] `src/js/history.js` 파일 생성
- [ ] 히스토리 추가 메서드
- [ ] 히스토리 표시 메서드
- [ ] 히스토리 삭제 메서드
- [ ] LocalStorage 연동

### 5.4 Settings Manager
- [ ] `src/js/settings.js` 파일 생성
- [ ] 설정 로드/저장
- [ ] 각도 모드 설정
- [ ] 테마 설정 (향후)

---

## 🎯 Phase 6: 통합 테스트 및 디버깅 (2-3일)

### 6.1 통합 테스트
- [ ] 전체 계산 플로우 테스트
- [ ] UI 인터랙션 테스트
- [ ] 엣지 케이스 테스트
- [ ] 브라우저 호환성 테스트

### 6.2 버그 수정
- [ ] 발견된 버그 목록 작성
- [ ] 우선순위별 버그 수정
- [ ] 회귀 테스트

### 6.3 성능 최적화
- [ ] 계산 속도 측정
- [ ] DOM 조작 최적화
- [ ] 메모이제이션 적용 (필요시)

---

## 🎯 Phase 7: 문서화 및 배포 (1-2일)

### 7.1 코드 문서화
- [ ] JSDoc 주석 추가
- [ ] README 업데이트 (사용법)
- [ ] API 문서 생성

### 7.2 배포 준비
- [ ] 프로덕션 빌드 스크립트 (선택)
- [ ] 코드 압축 (선택)
- [ ] GitHub Pages 배포 테스트

### 7.3 최종 검증
- [ ] 모든 테스트 통과 확인
- [ ] 커버리지 목표 달성 확인 (90%+)
- [ ] 배포된 사이트 동작 확인

---

## 🎯 Phase 8: 추가 기능 (선택)

### 8.1 고급 기능
- [ ] 2nd 기능 구현
- [ ] 수식 편집 (커서 이동)
- [ ] 계산 히스토리 검색
- [ ] 수식 저장/불러오기

### 8.2 UI/UX 개선
- [ ] 애니메이션 추가
- [ ] 테마 전환 (다크/라이트)
- [ ] 반응형 개선
- [ ] 접근성 향상

### 8.3 PWA 변환
- [ ] Service Worker 추가
- [ ] Manifest 파일 생성
- [ ] 오프라인 지원
- [ ] 홈 화면 추가 기능

---

## 📊 우선순위 및 예상 일정

| Phase | 작업 | 우선순위 | 예상 기간 | 의존성 |
|-------|------|---------|----------|--------|
| 1 | 개발 환경 설정 | 🔴 High | 1-2일 | - |
| 2 | Parser 구현 | 🔴 High | 3-5일 | Phase 1 |
| 3 | Evaluator 구현 | 🔴 High | 3-5일 | Phase 2 |
| 4 | Calculator Engine | 🔴 High | 2-3일 | Phase 2, 3 |
| 5 | UI 통합 | 🟡 Medium | 2-3일 | Phase 4 |
| 6 | 통합 테스트 | 🟡 Medium | 2-3일 | Phase 5 |
| 7 | 문서화 및 배포 | 🟡 Medium | 1-2일 | Phase 6 |
| 8 | 추가 기능 | 🟢 Low | 가변 | Phase 7 |

**총 예상 기간**: 14-23일 (Phase 1-7)

---

## ✅ 즉시 시작 가능한 작업

1. **개발 환경 설정** (오늘)
   - Node.js 프로젝트 초기화
   - Jest 설치 및 설정
   - ESLint/Prettier 설정

2. **Parser 구현 시작** (내일)
   - 첫 번째 테스트 작성
   - 토큰화 기능 구현

---

## 📝 작업 진행 방법

### TDD 사이클
```
각 기능마다:
1. 🔴 RED: 테스트 작성 → 실패 확인
2. 🟢 GREEN: 최소 구현 → 테스트 통과
3. 🔵 REFACTOR: 코드 개선 → 테스트 유지
```

### Git 커밋 전략
```
feat: 새 기능 추가
test: 테스트 추가/수정
refactor: 리팩토링
fix: 버그 수정
docs: 문서 수정
```

---

**작성일**: 2025-12-23  
**다음 업데이트**: Phase 1 완료 후
